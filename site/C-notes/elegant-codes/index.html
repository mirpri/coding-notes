<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Elegant Codes - My Coding Notes</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>
    

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-33SKNTLRN6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-33SKNTLRN6');
    </script>


    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">My Coding Notes</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Welcome</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">C notes</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../VSCode-for-C%2B%2B/" class="dropdown-item">VS Code Portable for C++</a>
</li>
                                    
<li>
    <a href="../cpp-features/" class="dropdown-item">C++ Features</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Elegant Codes</a>
</li>
                                    
<li>
    <a href="../try-something-in-c/" class="dropdown-item">Try something in C</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Deep Learning</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Deep-Learning/pytorch/" class="dropdown-item">Deep learning with PyTorch</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Web</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Web/JavaScript/" class="dropdown-item">JavaScript</a>
</li>
                                    
<li>
    <a href="../../Web/TypeScript/" class="dropdown-item">TypeScript Learning</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../cpp-features/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../try-something-in-c/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary" >
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary" style="max-height: 70vh; overflow-y: auto;">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#elegant-codes" class="nav-link">Elegant Codes</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#hanoi" class="nav-link">Hanoi</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_1" class="nav-link">杨辉三角</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_2" class="nav-link">逆波兰表达式</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_3" class="nav-link">矩阵运算</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_4" class="nav-link">高精度四则运算</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_5" class="nav-link">小数的进制转换</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_6" class="nav-link">文件读写模式实现替换</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#_7" class="nav-link">无中间变量交换变量</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#algorithms" class="nav-link">Algorithms</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#kmp" class="nav-link">KMP 字符串匹配</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="elegant-codes">Elegant Codes</h1>
<blockquote>
<p>🖐️</p>
<p>This is a collection of perfectly written codes to perform a specific task. Each code snippet is designed to be efficient, easy to understand, and reusable. These examples will probably help you improve your coding skills and find a better practice to implement a function.</p>
<p>If you have any questions or suggestions, feel free to share it with me!</p>
</blockquote>
<h2 id="hanoi">Hanoi</h2>
<p>经典的汉诺塔问题(c++)</p>
<pre><code class="language-c++">#include &lt;bits/stdc++.h&gt;
using namespace std;

int N;
int cnt=0;

int rod[3]={0,0,0};
char trans[]={'A','B','C'};
void movedisk(int n, int fr, int mi, int to){
    if (n==1){//边界条件
        rod[fr]--;rod[to]++;
        cnt++;
        cout&lt;&lt;&quot;step &quot;+to_string(cnt)+&quot;: movedisk &quot;+trans[fr]+&quot; to &quot;+trans[to]&lt;&lt;&quot;      [&quot;+to_string(rod[0])+&quot;] [&quot;+to_string(rod[1])+&quot;] [&quot;+to_string(rod[2])+&quot;]&quot;&lt;&lt;endl;
        return;
    }
    movedisk(n-1,fr,to,mi);
    movedisk(1,fr,mi,to);
    movedisk(n-1,mi,fr,to);//每增加一个disk，需要的次数为原来*2+1.
    return;
}

int main()
{
    cout&lt;&lt;&quot;number of disks: &quot;;
    cin&gt;&gt;N;
    rod[0]=N;
    movedisk(N,0,1,2);
    return 0;
}
</code></pre>
<h2 id="_1">杨辉三角</h2>
<p>打印杨辉三角</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int countWid(int num){
    return 4*num+1;
}

void giveSpace(int x){
    if(x/100)printf(&quot; &quot;);
    else if(x/10)printf(&quot;  &quot;);
    else printf(&quot;   &quot;);
}

int C(int i,int j){
    if(j==0)return 1;
    return C(i,j-1)*(i-j+1)/j;
}

int main()
{
    int N;
    scanf(&quot;%d&quot;,&amp;N);
    int center=countWid(N)/2+1;

    for (int i = 0; i &lt;= N; i++)
    {
        int spaces=center-countWid(i)/2-1;
        for (int j = 0; j &lt; spaces; j++)printf(&quot; &quot;);
        for (int j = 0; j &lt;= i; j++)
        {
            int tmp=C(i,j);
            printf(&quot;%d&quot;,tmp);
            giveSpace(tmp);
        }
        if(i!=N)printf(&quot;\n&quot;);                
    }
    return 0;
}
</code></pre>
<h2 id="_2">逆波兰表达式</h2>
<p>一种后缀表达式，
e.g.  4 -13 5 / +  answer: 2</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;

int stoi(char *s){
    int ans=0, sgn=1;
    if(s[0]=='-'){
        sgn=-1;
    }
    else
        ans=s[0]-'0';
    for (int i = 1; s[i]!='\0'; i++){
        ans=ans*10+s[i]-'0';
    }
    return sgn*ans;
}

int main()
{
    char in[20];
    int stack[10010];
    int tail=-1;
    int a,b;
    while (scanf(&quot;%s&quot;,in)!=EOF)
    {
        switch (in[0])
        {
        case '+':
            a=stack[tail--], b=stack[tail--];
            stack[++tail]=a+b;
            break;
        case '-':
            if(in[1]!='\0'){
                stack[++tail]=stoi(in);
                break;
            }
            a=stack[tail--], b=stack[tail--];
            stack[++tail]=b-a;
            break;
        case '*':
            a=stack[tail--], b=stack[tail--];
            stack[++tail]=a*b;
            break;
        case '/':
            a=stack[tail--], b=stack[tail--];
            stack[++tail]=b/a;
            break;      
        default:
            stack[++tail]=stoi(in);
            break;
        }
    }
    printf(&quot;%d&quot;,(int)stack[0]);

    return 0;
}


</code></pre>
<h2 id="_3">矩阵运算</h2>
<p>优雅的使用运算符进行矩阵运算(c++)</p>
<pre><code class="language-c++">#include &lt;bits/stdc++.h&gt;
using namespace std;

struct matrix {
    int s_i, s_j;
    vector&lt;vector&lt;double&gt;&gt; data;
};

struct vectors {
    int s;
    vector&lt;double&gt; data;
};

matrix operator*(const matrix&amp; a, const matrix&amp; b) {
    assert(a.s_j == b.s_i);

    matrix c;
    c.s_i = a.s_i;
    c.s_j = b.s_j;
    for (int i = 0; i &lt; c.s_i; i++) {
        c.data.push_back(vector&lt;double&gt;());
        for (int j = 0; j &lt; c.s_j; j++) {
            double sum = 0;
            for (int k = 0; k &lt; a.s_j; k++) {
                sum += a.data[i][k] * b.data[k][j];
            }
            c.data[i].push_back(sum);
        }
    }
    return c;
}

matrix operator*(const vectors&amp; a, const matrix&amp; b) {
    matrix c;
    c.s_i = b.s_i;
    c.s_j = b.s_j;
    for (int i = 0; i &lt; b.s_i; i++) {
        c.data.push_back(vector&lt;double&gt;());
        for (int j = 0; j &lt; b.s_j; j++) {
            c.data[i].push_back(a.data[i] * b.data[i][j]);
        }
    }
    return c;
}

matrix operator~(const matrix&amp; a) {  // Transpose
    matrix b;
    b.s_i = a.s_j;
    b.s_j = a.s_i;
    for (int i = 0; i &lt; b.s_i; i++) {
        b.data.push_back(vector&lt;double&gt;());
        for (int j = 0; j &lt; b.s_j; j++) {
            b.data[i].push_back(a.data[j][i]);
        }
    }
    return b;
}

void inputMatrix(matrix* p, int si, int sj) {
    p-&gt;s_i = si;
    p-&gt;s_j = sj;
    for (int i = 0; i &lt; si; i++) {
        p-&gt;data.push_back(vector&lt;double&gt;());
        for (int j = 0; j &lt; sj; j++) {
            p-&gt;data[i].push_back(0);
            cin &gt;&gt; p-&gt;data[i][j];
        }
    }
}

void inputVectors(vectors* p, int si) {
    p-&gt;s = si;
    for (int i = 0; i &lt; si; i++) {
        p-&gt;data.push_back(0);
        cin &gt;&gt; p-&gt;data[i];
    }
}

void outputMatrix(const matrix&amp; p) {
    for (int i = 0; i &lt; p.s_i; i++) {
        for (int j = 0; j &lt; p.s_j; j++) {
            cout &lt;&lt; p.data[i][j] &lt;&lt; ' ';
        }
        cout &lt;&lt; endl;
    }
}

int main() {
    matrix Q, K, V, ans;
    vectors W;
    int n, d;
    cin &gt;&gt; n &gt;&gt; d;

    inputMatrix(&amp;Q, n, d);
    inputMatrix(&amp;K, n, d);
    inputMatrix(&amp;V, n, d);
    inputVectors(&amp;W, n);

    ans = (W * (Q * ~K)) * V;

    outputMatrix(ans);

    return 0;
}
</code></pre>
<h2 id="_4">高精度四则运算</h2>
<p>重载运算符实现输入、输出+、-、*</p>
<pre><code class="language-c++">#include &lt;bits/stdc++.h&gt;
using namespace std;

const int mm=10010;

struct lll{
    short d[mm];
    int l;
    lll(){
        memset(d,0,sizeof(d));
        l=0;
    } 
};

lll operator+ (lll a,lll b){
    lll c;
    short tmp=0;
    int dts=max(a.l,b.l);
    for (int i = 0; i &lt; dts; i++)
    {
        c.d[i]=a.d[i]+b.d[i]+tmp;
        if(c.d[i]&gt;=10){
            c.d[i]-=10;
            tmp=1;
        }
        else{
            tmp=0;
        }
    }
    if (tmp){
        c.d[dts]=1;
        c.l=dts+1;
    }
    else{
        c.l=dts;
    }
    return c;
}

lll operator* (lll a,int b){
    for (int i = 0; i &lt; a.l; i++)
    {
        a.d[i]*=b;
    }
    int i;
    for (i = 0; i &lt; a.l || a.d[i]; i++)
    {
        a.d[i+1]+=a.d[i]/10;
        a.d[i]%=10;
    }
    a.l=i;
    return a;    
}

lll operator* (lll a,lll b){
    lll c;
    for (int i = 0; i &lt; a.l; i++)
    {
        for (int j = 0; j &lt; b.l; j++)
        {
            c.d[i+j]+=a.d[i]*b.d[j];
            int k;
            for (k = 0; k &lt; c.l || c.d[k]; k++)
            {
                c.d[k+1]+=c.d[k]/10;
                c.d[k]%=10;
            }
            c.l=max(c.l,k);       
        }        
    }
    return c;
}



ostream &amp; operator&lt;&lt; (ostream &amp;o,lll a){
    string s;
    for (int i = a.l-1; i &gt;= 0; i--)
    {
        s.push_back(a.d[i]+'0');
    }
    o&lt;&lt;s;
    return o;
}

istream &amp; operator&gt;&gt; (istream &amp;in,lll &amp;b){
    string s;
    in&gt;&gt;s;
    int len=s.length();
    for (int i = 0; i &lt; len; i++)
    {
        b.d[i]=s[len-i-1]-'0';
    }
    b.l=len;
    return in;
}


int main()
{
    lll n1,n2,n3;
    cin&gt;&gt;n1&gt;&gt;n2;
    n3=(n1*n2)*2;
    cout&lt;&lt;n3;

    return 0;
}
</code></pre>
<h2 id="_5">小数的进制转换</h2>
<pre><code class="language-c">#include&lt;iostream&gt;
using namespace std;

string trans=&quot;0123456789ABCDEFGHIJKLMNOP&quot;;

double convertto10(string s, int base){
    size_t i;
    int ansi=0; double ansf=0;
    for (i = 0; i &lt; s.size(); i++)
    {
        if(s[i]=='.')break;
        ansi*=base;
        ansi+=trans.find(s[i]);
    }
    for (size_t j=s.size()-1; j&gt;i; j--)
    {
        ansf+=trans.find(s[j]);
        ansf/=base;
    }
    return ansi+ansf;
}

string convertfrom10(double x, int base){
    int xi; double xf;
    xi=int(x); xf=x-xi;

    string ans=&quot;&quot;;

    while (xi){
        ans=trans[xi%base]+ans;
        xi/=base;
    }
    if(xf==0)return ans;
    ans+='.';
    int tmpcnt=0;
    while (xf &amp;&amp; tmpcnt++&lt;100)
    {
        xf*=base;
        int tmp=int(xf);
        ans+=trans[tmp];
        xf-=tmp;
    }
    return ans;
}

int main(){
    string x; int b1,b2;
    cout&lt;&lt;&quot;Input number, source base, target base.\n&quot;;
    cin&gt;&gt;x&gt;&gt;b1&gt;&gt;b2;
    cout&lt;&lt;&quot;answer: &quot;&lt;&lt;convertfrom10(convertto10(x,b1),b2);
    return 0;
}
</code></pre>
<h2 id="_6">文件读写模式实现替换</h2>
<pre><code class="language-c">#include &lt;stdio.h&gt;

FILE *fp;

void freplace(char _from, char _to) {  // 字符替换
    rewind(fp);                        // 定位到文件开始，清除标志
    while (!feof(fp)) {
        char tmp = fgetc(fp);
        long tmppos= ftell(fp);
        if (tmp == _from) {
            fseek(fp, -1, SEEK_CUR);
            fputc(_to, fp);
            fseek(fp,-1,SEEK_CUR);
        }
        printf(&quot;%c %d %d\n&quot;,tmp, ftell(fp), feof(fp));
    }
}

int main() {
    if (!(fp = fopen(&quot;..\\a.txt&quot;, &quot;r+&quot;))) {
        printf(&quot;failed to open&quot;);
        return 0;
    }
    freplace('p', 'd');

    fclose(fp);
    return 0;
}
</code></pre>
<h2 id="_7">无中间变量交换变量</h2>
<pre><code class="language-c">#include &lt;iostream&gt;
using namespace std;

int main() {
    int a=1234567,b=8901234;
    a=a^b;
    b=a^b;
    a=a^b;
    cout&lt;&lt;a&lt;&lt;&quot; &quot;&lt;&lt;b&lt;&lt;endl;    
    return 0;
}
</code></pre>
<p>其中，异或运算也可以用加减或乘除替代，但数据过大时可能溢出，乘除时要避免包含0。</p>
<h1 id="algorithms">Algorithms</h1>
<h2 id="kmp">KMP 字符串匹配</h2>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
using namespace std;
string s, txt;
vector&lt;int&gt; lsp;  // LSP: longest suffix which is also a prefix

void initlsp() {
    int n = s.size();
    lsp.clear();
    for (int i = 0; i &lt; n; i++) {
        lsp.push_back(0);
    }
    int len = 0;
    for (int i = 1; i &lt; n; i++) {  // NOTE: i start from 1
        while (len &gt; 0 &amp;&amp; s[i] != s[len]) {
            len = lsp[len - 1];  // fallback
        }
        if (s[i] == s[len]) {
            len++;  // increment len when match
        }
        lsp[i] = len;
    }
}

int match() {
    int n = s.length(), m = txt.length();
    int p = 0;
    for (int i = 0; i &lt; m; i++) {
        while (p &amp;&amp; txt[i] != s[p]) {
            p=lsp[p-1];
        }
        if(txt[i]==s[p]){
            p++;
        }
        if(p==n){
            return i-p+1;
        }
    }

    return -1;
}

int main() {
    cout &lt;&lt; &quot;input pattern string: &quot;;
    cin &gt;&gt; s;
    initlsp();

    cout &lt;&lt; &quot;LSP: &quot;;
    for (int i : lsp) {
        cout &lt;&lt; i &lt;&lt; ' ';
    }
    cout &lt;&lt; endl;

    cout &lt;&lt; &quot;input text string: &quot;;
    cin &gt;&gt; txt;
    int ans = match();
    if (ans &gt;= 0) {
        cout &lt;&lt; &quot;index: &quot; &lt;&lt; match() &lt;&lt; endl;
        cout &lt;&lt; txt &lt;&lt; endl;
        for (int i = 0; i &lt; ans; i++) {
            cout &lt;&lt; ' ';
        }
        for (int i = 0; i &lt; s.length(); i++) {
            cout &lt;&lt; '^';
        }
    } else {
        cout &lt;&lt; &quot;not found&quot;;
    }
    return 0;
}
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
                <p class="footer-p">© 2024-2025 Mirpri. Built with MkDocs.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
